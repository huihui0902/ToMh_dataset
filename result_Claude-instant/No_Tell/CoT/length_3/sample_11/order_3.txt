 Okay, here is my step by step analysis of where Emma thinks Lily thinks William thinks the melon is:

1. William, Lily and Emma were all in the porch together when the melon was first mentioned to be in the green_bathtub (statements 1 - 2).

2. William exited the porch before Lily. So Lily witnessed William make no movements and stay in the porch for 1 minute (statements 3 - 5).

3. Lily then exited the porch before Emma. So Emma witnessed Lily make no movements and stay in the porch for 1 minute (statements 5 - 6).  

4. Based on statements 1-6, Emma knows that Lily knows that William knows the melon is in the green_bathtub. This is because they were all in the porch together when the melon's location was mentioned.

5. There are no other interactions between William, Lily and Emma mentioned in the story that would change Emma's understanding of what Lily thinks William thinks.

6. Therefore, the answer is A. Emma thinks Lily thinks William thinks the melon is in the green_bathtub.

So in summary, the answer is A: green_bathtub